!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.Tether=t()}(this,function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){var t=e.getBoundingClientRect(),i={};for(var a in t)i[a]=t[a];if(e.ownerDocument!==document){var n=e.ownerDocument.defaultView.frameElement;if(n){var o=r(n);i.top+=o.top,i.bottom+=o.top,i.left+=o.left,i.right+=o.left}}return i}function l(e){var t=getComputedStyle(e)||{},i=t.position,a=[];if("fixed"===i)return[e];for(var n=e;(n=n.parentNode)&&n&&1===n.nodeType;){var o=void 0;try{o=getComputedStyle(n)}catch(s){}if("undefined"==typeof o||null===o)return a.push(n),a;var r=o,l=r.overflow,p=r.overflowX,d=r.overflowY;/(auto|scroll)/.test(l+d+p)&&("absolute"!==i||["relative","absolute","fixed"].indexOf(o.position)>=0)&&a.push(n)}return a.push(e.ownerDocument.body),e.ownerDocument!==document&&a.push(e.ownerDocument.defaultView),a}function u(){s&&document.body.removeChild(s),s=null}function f(e){var t=void 0;e===document?(t=document,e=document.documentElement):t=e.ownerDocument;var i=t.documentElement,a=r(e),n=c();return a.top-=n.top,a.left-=n.left,"undefined"==typeof a.width&&(a.width=document.body.scrollWidth-a.left-a.right),"undefined"==typeof a.height&&(a.height=document.body.scrollHeight-a.top-a.bottom),a.top=a.top-i.clientTop,a.left=a.left-i.clientLeft,a.right=t.body.clientWidth-a.width-a.left,a.bottom=t.body.clientHeight-a.height-a.top,a}function m(e){return e.offsetParent||document.documentElement}function h(){var e=document.createElement("div");e.style.width="100%",e.style.height="200px";var t=document.createElement("div");E(t.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var a=e.offsetWidth;i===a&&(a=t.clientWidth),document.body.removeChild(t);var n=i-a;return{width:n,height:n}}function E(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=[];return Array.prototype.push.apply(t,arguments),t.slice(1).forEach(function(t){if(t)for(var i in t)({}).hasOwnProperty.call(t,i)&&(e[i]=t[i])}),e}function g(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var i=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi"),a=C(e).replace(i," ");A(e,a)}}function v(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{g(e,t);var i=C(e)+(" "+t);A(e,i)}}function R(e,t){if("undefined"!=typeof e.classList)return e.classList.contains(t);var i=C(e);return new RegExp("(^| )"+t+"( |$)","gi").test(i)}function C(e){return e.className instanceof e.ownerDocument.defaultView.SVGAnimatedString?e.className.baseVal:e.className}function A(e,t){e.setAttribute("class",t)}function S(e,t,i){i.forEach(function(i){-1===t.indexOf(i)&&R(e,i)&&g(e,i)}),t.forEach(function(t){R(e,t)||v(e,t)})}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e,t){var i=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return e+i>=t&&t>=e-i}function D(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function F(){for(var e={top:0,left:0},t=arguments.length,i=Array(t),a=0;t>a;a++)i[a]=arguments[a];return i.forEach(function(t){var i=t.top,a=t.left;"string"==typeof i&&(i=parseFloat(i,10)),"string"==typeof a&&(a=parseFloat(a,10)),e.top+=i,e.left+=a}),e}function k(e,t){return"string"==typeof e.left&&-1!==e.left.indexOf("%")&&(e.left=parseFloat(e.left,10)/100*t.width),"string"==typeof e.top&&-1!==e.top.indexOf("%")&&(e.top=parseFloat(e.top,10)/100*t.height),e}function j(e,t){return"scrollParent"===t?t=e.scrollParents[0]:"window"===t&&(t=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),t===document&&(t=t.documentElement),"undefined"!=typeof t.nodeType&&!function(){var e=t,i=f(t),a=i,n=getComputedStyle(t);if(t=[a.left,a.top,i.width+a.left,i.height+a.top],e.ownerDocument!==document){var o=e.ownerDocument.defaultView;t[0]+=o.pageXOffset,t[1]+=o.pageYOffset,t[2]+=o.pageXOffset,t[3]+=o.pageYOffset}q.forEach(function(e,i){e=e[0].toUpperCase()+e.substr(1),"Top"===e||"Left"===e?t[i]+=parseFloat(n["border"+e+"Width"]):t[i]-=parseFloat(n["border"+e+"Width"])})}(),t}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),o=void 0;"undefined"==typeof o&&(o={modules:[]});var s=null,p=function(){var e=0;return function(){return++e}}(),d={},c=function(){var e=s;e||(e=document.createElement("div"),e.setAttribute("data-tether-id",p()),E(e.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(e),s=e);var t=e.getAttribute("data-tether-id");return"undefined"==typeof d[t]&&(d[t]=r(e),L(function(){delete d[t]})),d[t]},T=[],L=function(e){T.push(e)},N=function(){for(var e=void 0;e=T.pop();)e()},I=function(){function e(){n(this,e)}return a(e,[{key:"on",value:function(e,t,i){var a=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[e]&&(this.bindings[e]=[]),this.bindings[e].push({handler:t,ctx:i,once:a})}},{key:"once",value:function(e,t,i){this.on(e,t,i,!0)}},{key:"off",value:function(e,t){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[e])if("undefined"==typeof t)delete this.bindings[e];else for(var i=0;i<this.bindings[e].length;)this.bindings[e][i].handler===t?this.bindings[e].splice(i,1):++i}},{key:"trigger",value:function(e){if("undefined"!=typeof this.bindings&&this.bindings[e]){for(var t=0,i=arguments.length,a=Array(i>1?i-1:0),n=1;i>n;n++)a[n-1]=arguments[n];for(;t<this.bindings[e].length;){var o=this.bindings[e][t],s=o.handler,r=o.ctx,l=o.once,p=r;"undefined"==typeof p&&(p=this),s.apply(p,a),l?this.bindings[e].splice(t,1):++t}}}}]),e}();o.Utils={getActualBoundingClientRect:r,getScrollParents:l,getBounds:f,getOffsetParent:m,extend:E,addClass:v,removeClass:g,hasClass:R,updateClasses:S,defer:L,flush:N,uniqueId:p,Evented:I,getScrollBarSize:h,removeUtilElements:u};var w=function(){function e(e,t){var i=[],a=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){n=!0,o=l}finally{try{!a&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),M=function(e,t,i){for(var a=!0;a;){var n=e,o=t,s=i;a=!1,null===n&&(n=Function.prototype);var r=Object.getOwnPropertyDescriptor(n,o);if(void 0!==r){if("value"in r)return r.value;var p=r.get;return void 0===p?void 0:p.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return void 0;e=l,t=o,i=s,a=!0,r=l=void 0}};if("undefined"==typeof o)throw new Error("You must include the utils.js file before tether.js");var y=o.Utils,l=y.getScrollParents,f=y.getBounds,m=y.getOffsetParent,E=y.extend,v=y.addClass,g=y.removeClass,S=y.updateClasses,L=y.defer,N=y.flush,h=y.getScrollBarSize,u=y.removeUtilElements,x=function(){if("undefined"==typeof document)return"";for(var e=document.createElement("div"),t=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],i=0;i<t.length;++i){var a=t[i];if(void 0!==e.style[a])return a}}(),U=[],P=function(){U.forEach(function(e){e.position(!1)}),N()};!function(){var e=null,t=null,i=null,a=function n(){return"undefined"!=typeof t&&t>16?(t=Math.min(t-16,250),void(i=setTimeout(n,250))):void("undefined"!=typeof e&&D()-e<10||(null!=i&&(clearTimeout(i),i=null),e=D(),P(),t=D()-e))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(e){window.addEventListener(e,a)})}();var H={center:"center",left:"right",right:"left"},z={middle:"middle",top:"bottom",bottom:"top"},B={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},Y=function(e,t){var i=e.left,a=e.top;return"auto"===i&&(i=H[t.left]),"auto"===a&&(a=z[t.top]),{left:i,top:a}},G=function(e){var t=e.left,i=e.top;return"undefined"!=typeof B[e.left]&&(t=B[e.left]),"undefined"!=typeof B[e.top]&&(i=B[e.top]),{left:t,top:i}},X=function(e){var t=e.split(" "),i=w(t,2),a=i[0],n=i[1];return{top:a,left:n}},V=X,W=function(e){function t(e){var i=this;n(this,t),M(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.position=this.position.bind(this),U.push(this),this.history=[],this.setOptions(e,!1),o.modules.forEach(function(e){"undefined"!=typeof e.initialize&&e.initialize.call(i)}),this.position()}return O(t,e),a(t,[{key:"getClass",value:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=this.options.classes;return"undefined"!=typeof t&&t[e]?this.options.classes[e]:this.options.classPrefix?this.options.classPrefix+"-"+e:e}},{key:"setOptions",value:function(e){var t=this,i=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],a={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=E(a,e);var n=this.options,o=n.element,s=n.target,r=n.targetModifier;if(this.element=o,this.target=s,this.targetModifier=r,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(e){if("undefined"==typeof t[e])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof t[e].jquery?t[e]=t[e][0]:"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),v(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&v(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=V(this.options.targetAttachment),this.attachment=V(this.options.attachment),this.offset=X(this.options.offset),this.targetOffset=X(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=l(this.target),this.options.enabled!==!1&&this.enable(i)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return f(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var e=f(this.target),t={height:e.height,width:e.width,top:e.top,left:e.left};return t.height=Math.min(t.height,e.height-(pageYOffset-e.top)),t.height=Math.min(t.height,e.height-(e.top+e.height-(pageYOffset+innerHeight))),t.height=Math.min(innerHeight,t.height),t.height-=2,t.width=Math.min(t.width,e.width-(pageXOffset-e.left)),t.width=Math.min(t.width,e.width-(e.left+e.width-(pageXOffset+innerWidth))),t.width=Math.min(innerWidth,t.width),t.width-=2,t.top<pageYOffset&&(t.top=pageYOffset),t.left<pageXOffset&&(t.left=pageXOffset),t}if("scroll-handle"===this.targetModifier){var e=void 0,i=this.target;i===document.body?(i=document.documentElement,e={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):e=f(i);var a=getComputedStyle(i),n=i.scrollWidth>i.clientWidth||[a.overflow,a.overflowX].indexOf("scroll")>=0||this.target!==document.body,o=0;n&&(o=15);var s=e.height-parseFloat(a.borderTopWidth)-parseFloat(a.borderBottomWidth)-o,t={width:15,height:.975*s*(s/i.scrollHeight),left:e.left+e.width-parseFloat(a.borderLeftWidth)-15},r=0;408>s&&this.target===document.body&&(r=-11e-5*Math.pow(s,2)-.00727*s+22.58),this.target!==document.body&&(t.height=Math.max(t.height,24));var l=this.target.scrollTop/(i.scrollHeight-s);return t.top=l*(s-t.height-r)+e.top+parseFloat(a.borderTopWidth),this.target===document.body&&(t.height=Math.max(t.height,24)),t}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(e,t){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[e]&&(this._cache[e]=t.call(this)),this._cache[e]}},{key:"enable",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];this.options.addTargetClasses!==!1&&v(this.target,this.getClass("enabled")),v(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(t){t!==e.target.ownerDocument&&t.addEventListener("scroll",e.position)}),t&&this.position()}},{key:"disable",value:function(){var e=this;g(this.target,this.getClass("enabled")),g(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.position)})}},{key:"destroy",value:function(){var e=this;this.disable(),U.forEach(function(t,i){t===e&&U.splice(i,1)}),0===U.length&&u()}},{key:"updateAttachClasses",value:function(e,t){var i=this;e=e||this.attachment,t=t||this.targetAttachment;var a=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var n=this._addAttachClasses;e.top&&n.push(this.getClass("element-attached")+"-"+e.top),e.left&&n.push(this.getClass("element-attached")+"-"+e.left),t.top&&n.push(this.getClass("target-attached")+"-"+t.top),t.left&&n.push(this.getClass("target-attached")+"-"+t.left);var o=[];a.forEach(function(e){o.push(i.getClass("element-attached")+"-"+e),o.push(i.getClass("target-attached")+"-"+e)}),L(function(){"undefined"!=typeof i._addAttachClasses&&(S(i.element,i._addAttachClasses,o),i.options.addTargetClasses!==!1&&S(i.target,i._addAttachClasses,o),delete i._addAttachClasses)})}},{key:"position",value:function(){var e=this,t=arguments.length<=0||void 0===arguments[0]?!0:arguments[0];if(this.enabled){this.clearCache();var i=Y(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);var a=this.cache("element-bounds",function(){return f(e.element)}),n=a.width,s=a.height;if(0===n&&0===s&&"undefined"!=typeof this.lastSize){var r=this.lastSize;n=r.width,s=r.height}else this.lastSize={width:n,height:s};var l=this.cache("target-bounds",function(){return e.getTargetBounds()}),p=l,d=k(G(this.attachment),{width:n,height:s}),c=k(G(i),p),u=k(this.offset,{width:n,height:s}),E=k(this.targetOffset,p);d=F(d,u),c=F(c,E);for(var g=l.left+c.left-d.left,v=l.top+c.top-d.top,R=0;R<o.modules.length;++R){var C=o.modules[R],A=C.position.call(this,{left:g,top:v,targetAttachment:i,targetPos:l,elementPos:a,offset:d,targetOffset:c,manualOffset:u,manualTargetOffset:E,scrollbarSize:I,attachment:this.attachment});if(A===!1)return!1;"undefined"!=typeof A&&"object"==typeof A&&(v=A.top,g=A.left)}var S={page:{top:v,left:g},viewport:{top:v-pageYOffset,bottom:pageYOffset-v-s+innerHeight,left:g-pageXOffset,right:pageXOffset-g-n+innerWidth}},T=this.target.ownerDocument,L=T.defaultView,I=void 0;return T.body.scrollWidth>L.innerWidth&&(I=this.cache("scrollbar-size",h),S.viewport.bottom-=I.height),T.body.scrollHeight>L.innerHeight&&(I=this.cache("scrollbar-size",h),S.viewport.right-=I.width),(-1===["","static"].indexOf(T.body.style.position)||-1===["","static"].indexOf(T.body.parentElement.style.position))&&(S.page.bottom=T.body.scrollHeight-v-s,S.page.right=T.body.scrollWidth-g-n),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var t=e.cache("target-offsetparent",function(){return m(e.target)}),i=e.cache("target-offsetparent-bounds",function(){return f(t)}),a=getComputedStyle(t),n=i,o={};if(["Top","Left","Bottom","Right"].forEach(function(e){o[e.toLowerCase()]=parseFloat(a["border"+e+"Width"])}),i.right=T.body.scrollWidth-i.left-n.width+o.right,i.bottom=T.body.scrollHeight-i.top-n.height+o.bottom,S.page.top>=i.top+o.top&&S.page.bottom>=i.bottom&&S.page.left>=i.left+o.left&&S.page.right>=i.right){var s=t.scrollTop,r=t.scrollLeft;S.offset={top:S.page.top-i.top+s-o.top,left:S.page.left-i.left+r-o.left}}}(),this.move(S),this.history.unshift(S),this.history.length>3&&this.history.pop(),t&&N(),!0}}},{key:"move",value:function(e){var t=this;if("undefined"!=typeof this.element.parentNode){var i={};for(var a in e){i[a]={};for(var n in e[a]){for(var o=!1,s=0;s<this.history.length;++s){var r=this.history[s];if("undefined"!=typeof r[a]&&!b(r[a][n],e[a][n])){o=!0;break}}o||(i[a][n]=!0)}}var l={top:"",left:"",right:"",bottom:""},p=function(e,i){var a="undefined"!=typeof t.options.optimizations,n=a?t.options.optimizations.gpu:null;if(n!==!1){var o=void 0,s=void 0;e.top?(l.top=0,o=i.top):(l.bottom=0,o=-i.bottom),e.left?(l.left=0,s=i.left):(l.right=0,s=-i.right),l[x]="translateX("+Math.round(s)+"px) translateY("+Math.round(o)+"px)","msTransform"!==x&&(l[x]+=" translateZ(0)")}else e.top?l.top=i.top+"px":l.bottom=i.bottom+"px",e.left?l.left=i.left+"px":l.right=i.right+"px"},d=!1;if((i.page.top||i.page.bottom)&&(i.page.left||i.page.right)?(l.position="absolute",p(i.page,e.page)):(i.viewport.top||i.viewport.bottom)&&(i.viewport.left||i.viewport.right)?(l.position="fixed",p(i.viewport,e.viewport)):"undefined"!=typeof i.offset&&i.offset.top&&i.offset.left?!function(){l.position="absolute";var a=t.cache("target-offsetparent",function(){return m(t.target)});m(t.element)!==a&&L(function(){t.element.parentNode.removeChild(t.element),a.appendChild(t.element)}),p(i.offset,e.offset),d=!0}():(l.position="absolute",p({top:!0,left:!0},e.page)),!d){for(var c=!0,u=this.element.parentNode;u&&1===u.nodeType&&"BODY"!==u.tagName;){if("static"!==getComputedStyle(u).position){c=!1;break}u=u.parentNode}c||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var f={},h=!1;for(var n in l){var g=l[n],v=this.element.style[n];v!==g&&(h=!0,f[n]=g)}h&&L(function(){E(t.element.style,f)})}}}]),t}(I);W.modules=[],o.position=P;var K=E(W,o),w=function(){function e(e,t){var i=[],a=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){n=!0,o=l}finally{try{!a&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=o.Utils,f=y.getBounds,E=y.extend,S=y.updateClasses,L=y.defer,q=["left","top","right","bottom"];o.modules.push({position:function(e){var t=this,i=e.top,a=e.left,n=e.targetAttachment;if(!this.options.constraints)return!0;var o=this.cache("element-bounds",function(){return f(t.element)}),s=o.height,r=o.width;if(0===r&&0===s&&"undefined"!=typeof this.lastSize){var l=this.lastSize;r=l.width,s=l.height}var p=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=p.height,c=p.width,u=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(e){var t=e.outOfBoundsClass,i=e.pinnedClass;t&&u.push(t),i&&u.push(i)}),u.forEach(function(e){["left","top","right","bottom"].forEach(function(t){u.push(e+"-"+t)})});var m=[],h=E({},n),g=E({},this.attachment);return this.options.constraints.forEach(function(e){var o=e.to,l=e.attachment,p=e.pin;"undefined"==typeof l&&(l="");var u=void 0,f=void 0;if(l.indexOf(" ")>=0){var E=l.split(" "),v=w(E,2);f=v[0],u=v[1]}else u=f=l;var R=j(t,o);("target"===f||"both"===f)&&(i<R[1]&&"top"===h.top&&(i+=d,h.top="bottom"),i+s>R[3]&&"bottom"===h.top&&(i-=d,h.top="top")),"together"===f&&("top"===h.top&&("bottom"===g.top&&i<R[1]?(i+=d,h.top="bottom",i+=s,g.top="top"):"top"===g.top&&i+s>R[3]&&i-(s-d)>=R[1]&&(i-=s-d,h.top="bottom",g.top="bottom")),"bottom"===h.top&&("top"===g.top&&i+s>R[3]?(i-=d,h.top="top",i-=s,g.top="bottom"):"bottom"===g.top&&i<R[1]&&i+(2*s-d)<=R[3]&&(i+=s-d,h.top="top",g.top="top")),"middle"===h.top&&(i+s>R[3]&&"top"===g.top?(i-=s,g.top="bottom"):i<R[1]&&"bottom"===g.top&&(i+=s,g.top="top"))),("target"===u||"both"===u)&&(a<R[0]&&"left"===h.left&&(a+=c,h.left="right"),a+r>R[2]&&"right"===h.left&&(a-=c,h.left="left")),"together"===u&&(a<R[0]&&"left"===h.left?"right"===g.left?(a+=c,h.left="right",a+=r,g.left="left"):"left"===g.left&&(a+=c,h.left="right",a-=r,g.left="right"):a+r>R[2]&&"right"===h.left?"left"===g.left?(a-=c,h.left="left",a-=r,g.left="right"):"right"===g.left&&(a-=c,h.left="left",a+=r,g.left="left"):"center"===h.left&&(a+r>R[2]&&"left"===g.left?(a-=r,g.left="right"):a<R[0]&&"right"===g.left&&(a+=r,g.left="left"))),("element"===f||"both"===f)&&(i<R[1]&&"bottom"===g.top&&(i+=s,g.top="top"),i+s>R[3]&&"top"===g.top&&(i-=s,g.top="bottom")),("element"===u||"both"===u)&&(a<R[0]&&("right"===g.left?(a+=r,g.left="left"):"center"===g.left&&(a+=r/2,g.left="left")),a+r>R[2]&&("left"===g.left?(a-=r,g.left="right"):"center"===g.left&&(a-=r/2,g.left="right"))),"string"==typeof p?p=p.split(",").map(function(e){return e.trim()}):p===!0&&(p=["top","left","right","bottom"]),p=p||[];var C=[],A=[];i<R[1]&&(p.indexOf("top")>=0?(i=R[1],C.push("top")):A.push("top")),i+s>R[3]&&(p.indexOf("bottom")>=0?(i=R[3]-s,C.push("bottom")):A.push("bottom")),a<R[0]&&(p.indexOf("left")>=0?(a=R[0],C.push("left")):A.push("left")),a+r>R[2]&&(p.indexOf("right")>=0?(a=R[2]-r,C.push("right")):A.push("right")),C.length&&!function(){var e=void 0;e="undefined"!=typeof t.options.pinnedClass?t.options.pinnedClass:t.getClass("pinned"),m.push(e),C.forEach(function(t){m.push(e+"-"+t)})}(),A.length&&!function(){var e=void 0;e="undefined"!=typeof t.options.outOfBoundsClass?t.options.outOfBoundsClass:t.getClass("out-of-bounds"),m.push(e),A.forEach(function(t){m.push(e+"-"+t)})}(),(C.indexOf("left")>=0||C.indexOf("right")>=0)&&(g.left=h.left=!1),(C.indexOf("top")>=0||C.indexOf("bottom")>=0)&&(g.top=h.top=!1),(h.top!==n.top||h.left!==n.left||g.top!==t.attachment.top||g.left!==t.attachment.left)&&(t.updateAttachClasses(g,h),t.trigger("update",{attachment:g,targetAttachment:h}))}),L(function(){t.options.addTargetClasses!==!1&&S(t.target,m,u),S(t.element,m,u)}),{top:i,left:a}}});var y=o.Utils,f=y.getBounds,S=y.updateClasses,L=y.defer;o.modules.push({position:function(e){var t=this,i=e.top,a=e.left,n=this.cache("element-bounds",function(){return f(t.element)}),o=n.height,s=n.width,r=this.getTargetBounds(),l=i+o,p=a+s,d=[];i<=r.bottom&&l>=r.top&&["left","right"].forEach(function(e){var t=r[e];(t===a||t===p)&&d.push(e)}),a<=r.right&&p>=r.left&&["top","bottom"].forEach(function(e){var t=r[e];(t===i||t===l)&&d.push(e)});var c=[],u=[],m=["left","top","right","bottom"];return c.push(this.getClass("abutted")),m.forEach(function(e){c.push(t.getClass("abutted")+"-"+e)}),d.length&&u.push(this.getClass("abutted")),d.forEach(function(e){u.push(t.getClass("abutted")+"-"+e)}),L(function(){t.options.addTargetClasses!==!1&&S(t.target,u,c),S(t.element,u,c)}),!0}});var w=function(){function e(e,t){var i=[],a=!0,n=!1,o=void 0;try{for(var r,s=e[Symbol.iterator]();!(a=(r=s.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(l){n=!0,o=l}finally{try{!a&&s["return"]&&s["return"]()}finally{if(n)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return o.modules.push({position:function(e){var t=e.top,i=e.left;if(this.options.shift){var a=this.options.shift;"function"==typeof this.options.shift&&(a=this.options.shift.call(this,{top:t,left:i}));var n=void 0,o=void 0;if("string"==typeof a){a=a.split(" "),a[1]=a[1]||a[0];var s=a,r=w(s,2);n=r[0],o=r[1],n=parseFloat(n,10),o=parseFloat(o,10)}else n=a.top,o=a.left;return t+=n,i+=o,{top:t,left:i}}}}),K});