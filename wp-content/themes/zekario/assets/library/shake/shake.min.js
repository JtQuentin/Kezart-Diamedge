!function(i,o){"function"==typeof define&&define.amd?define(function(){return o(i,i.document)}):"undefined"!=typeof module&&module.exports?module.exports=o(i,i.document):i.Shake=o(i,i.document)}("undefined"!=typeof window?window:this,function(i,o){"use strict";function t(t){if(this.hasDeviceMotion="ondevicemotion"in i,this.options={threshold:15,timeout:1e3},"object"==typeof t)for(var a in t)t.hasOwnProperty(a)&&(this.options[a]=t[a]);if(this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null,"function"==typeof o.CustomEvent)this.event=new o.CustomEvent("shake",{bubbles:!0,cancelable:!0});else{if("function"!=typeof o.createEvent)return!1;this.event=o.createEvent("Event"),this.event.initEvent("shake",!0,!0)}}return t.prototype.reset=function(){this.lastTime=new Date,this.lastX=null,this.lastY=null,this.lastZ=null},t.prototype.start=function(){this.reset(),this.hasDeviceMotion&&i.addEventListener("devicemotion",this,!1)},t.prototype.stop=function(){this.hasDeviceMotion&&i.removeEventListener("devicemotion",this,!1),this.reset()},t.prototype.devicemotion=function(o){var a,l,t=o.accelerationIncludingGravity,n=0,E=0,s=0;return null===this.lastX&&null===this.lastY&&null===this.lastZ?(this.lastX=t.x,this.lastY=t.y,void(this.lastZ=t.z)):(n=Math.abs(this.lastX-t.x),E=Math.abs(this.lastY-t.y),s=Math.abs(this.lastZ-t.z),(n>this.options.threshold&&E>this.options.threshold||n>this.options.threshold&&s>this.options.threshold||E>this.options.threshold&&s>this.options.threshold)&&(a=new Date,l=a.getTime()-this.lastTime.getTime(),l>this.options.timeout&&(i.dispatchEvent(this.event),this.lastTime=new Date)),this.lastX=t.x,this.lastY=t.y,void(this.lastZ=t.z))},t.prototype.handleEvent=function(i){return"function"==typeof this[i.type]?this[i.type](i):void 0},t});